basePath: /api
definitions:
  dto.ChangePasswordRequest:
    properties:
      password:
        minLength: 8
        type: string
    required:
    - password
    type: object
  dto.CreateAchievementRequest:
    properties:
      color:
        enum:
        - yellow
        - blue
        - slate
        - amber
        - purple
        - emerald
        - red
        - orange
        type: string
      description:
        maxLength: 500
        minLength: 10
        type: string
      icon:
        enum:
        - trophy
        - award
        - mic
        - crown
        - music
        - book
        - medal
        - zap
        - star
        type: string
      subtitle:
        maxLength: 100
        minLength: 3
        type: string
      title:
        maxLength: 100
        minLength: 3
        type: string
    required:
    - color
    - description
    - icon
    - subtitle
    - title
    type: object
  dto.CreateAdminRequest:
    properties:
      name:
        maxLength: 100
        type: string
      password:
        minLength: 8
        type: string
      username:
        maxLength: 50
        minLength: 2
        type: string
    required:
    - password
    - username
    type: object
  dto.CreateMessageRequest:
    properties:
      email:
        type: string
      message:
        maxLength: 2000
        minLength: 10
        type: string
      name:
        maxLength: 100
        minLength: 2
        type: string
      subject:
        maxLength: 200
        minLength: 3
        type: string
    required:
    - email
    - message
    - name
    - subject
    type: object
  dto.CreateVideoRequest:
    properties:
      thumbnail:
        type: string
      title:
        maxLength: 100
        minLength: 3
        type: string
      youtube_id:
        maxLength: 20
        minLength: 5
        type: string
    required:
    - title
    - youtube_id
    type: object
  dto.LoginRequest:
    properties:
      password:
        minLength: 6
        type: string
      username:
        maxLength: 50
        minLength: 2
        type: string
    required:
    - password
    - username
    type: object
  dto.RefreshTokenRequest:
    properties:
      refresh_token:
        type: string
    required:
    - refresh_token
    type: object
  dto.TokenPair:
    properties:
      access_token:
        type: string
      expires_in:
        description: Access token expiry in seconds
        type: integer
      refresh_token:
        type: string
      user:
        $ref: '#/definitions/dto.UserDTO'
    type: object
  dto.UpdateAchievementRequest:
    properties:
      color:
        enum:
        - yellow
        - blue
        - slate
        - amber
        - purple
        - emerald
        - red
        - orange
        type: string
      description:
        maxLength: 500
        minLength: 10
        type: string
      icon:
        enum:
        - trophy
        - award
        - mic
        - crown
        - music
        - book
        - medal
        - zap
        - star
        type: string
      subtitle:
        maxLength: 100
        minLength: 3
        type: string
      title:
        maxLength: 100
        minLength: 3
        type: string
    type: object
  dto.UpdateGalleryRequest:
    properties:
      cover_url:
        type: string
      description:
        maxLength: 500
        minLength: 10
        type: string
      title:
        maxLength: 100
        minLength: 3
        type: string
    type: object
  dto.UpdateVideoRequest:
    properties:
      thumbnail:
        type: string
      title:
        maxLength: 100
        minLength: 3
        type: string
      youtube_id:
        maxLength: 20
        minLength: 5
        type: string
    type: object
  dto.UserDTO:
    properties:
      id:
        type: integer
      role:
        type: string
      username:
        type: string
    type: object
  handlers.HealthResponse:
    properties:
      services:
        additionalProperties:
          type: string
        type: object
      status:
        type: string
    type: object
  models.Article:
    properties:
      author:
        $ref: '#/definitions/models.User'
      author_id:
        type: integer
      content:
        type: string
      created_at:
        type: string
      id:
        type: integer
      is_published:
        type: boolean
      slug:
        type: string
      thumbnail_url:
        type: string
      title:
        type: string
      updated_at:
        type: string
    type: object
  models.User:
    properties:
      created_at:
        type: string
      id:
        type: integer
      role:
        description: '''super_admin'' or ''admin'''
        type: string
      updated_at:
        type: string
      username:
        type: string
    type: object
  utils.APIResponse:
    properties:
      data: {}
      error: {}
      message:
        type: string
      request_id:
        type: string
      status:
        type: boolean
    type: object
host: localhost:8080
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: Backend API for Pondok Pesantren K3 Arafah Website.
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: K3 Arafah Web API
  version: "1.0"
paths:
  /achievements:
    get:
      description: Get all achievements
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.APIResponse'
      summary: Get all achievements
      tags:
      - achievements
    post:
      consumes:
      - application/json
      description: Create a new achievement entry (admin only)
      parameters:
      - description: Achievement data
        in: body
        name: achievement
        required: true
        schema:
          $ref: '#/definitions/dto.CreateAchievementRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Create a new achievement
      tags:
      - achievements
  /achievements/{id}:
    delete:
      description: Delete an achievement (admin only)
      parameters:
      - description: Achievement ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Delete an achievement
      tags:
      - achievements
    put:
      consumes:
      - application/json
      description: Update an existing achievement (admin only)
      parameters:
      - description: Achievement ID
        in: path
        name: id
        required: true
        type: integer
      - description: Updated achievement data
        in: body
        name: achievement
        required: true
        schema:
          $ref: '#/definitions/dto.UpdateAchievementRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Update an achievement
      tags:
      - achievements
  /admins:
    get:
      description: Retrieve list of all admin users
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.APIResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/models.User'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Get all admins
      tags:
      - auth
    post:
      consumes:
      - application/json
      description: Create a new admin user (Super Admin only)
      parameters:
      - description: Admin Data
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/dto.CreateAdminRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Create new admin
      tags:
      - auth
  /admins/{id}:
    delete:
      description: Delete an admin user by ID
      parameters:
      - description: Admin ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Delete admin
      tags:
      - auth
  /admins/{id}/password:
    put:
      consumes:
      - application/json
      description: Update password for an admin user (Super Admin only)
      parameters:
      - description: Admin ID
        in: path
        name: id
        required: true
        type: integer
      - description: New Password
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/dto.ChangePasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Update admin password
      tags:
      - auth
  /articles:
    get:
      description: Get all articles with optional pagination
      parameters:
      - description: Page number
        in: query
        name: page
        type: integer
      - description: Items per page
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.APIResponse'
      summary: Get all articles
      tags:
      - articles
    post:
      consumes:
      - application/json
      description: Create a new article (admin only)
      parameters:
      - description: Article data
        in: body
        name: article
        required: true
        schema:
          $ref: '#/definitions/models.Article'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Create a new article
      tags:
      - articles
  /articles/{id}:
    delete:
      description: Delete an article (admin only)
      parameters:
      - description: Article ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Delete an article
      tags:
      - articles
    get:
      description: Get a single article by its ID
      parameters:
      - description: Article ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/utils.APIResponse'
      summary: Get article by ID
      tags:
      - articles
    put:
      consumes:
      - application/json
      description: Update an existing article (admin only)
      parameters:
      - description: Article ID
        in: path
        name: id
        required: true
        type: integer
      - description: Updated article data
        in: body
        name: article
        required: true
        schema:
          $ref: '#/definitions/models.Article'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Update an article
      tags:
      - articles
  /articles/slug/{slug}:
    get:
      description: Get a single article by its URL slug
      parameters:
      - description: Article slug
        in: path
        name: slug
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/utils.APIResponse'
      summary: Get article by slug
      tags:
      - articles
  /contact:
    post:
      consumes:
      - application/json
      description: Submit a new message from contact form
      parameters:
      - description: Message Data
        in: body
        name: message
        required: true
        schema:
          $ref: '#/definitions/dto.CreateMessageRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
      summary: Submit a contact message
      tags:
      - messages
  /galleries:
    get:
      description: Get all gallery albums
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.APIResponse'
      summary: Get all galleries
      tags:
      - galleries
    post:
      consumes:
      - multipart/form-data
      description: Create a new gallery album (admin only)
      parameters:
      - description: Gallery title
        in: formData
        name: title
        required: true
        type: string
      - description: Gallery description
        in: formData
        name: description
        type: string
      - description: Cover image
        in: formData
        name: cover
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Create a new gallery
      tags:
      - galleries
  /galleries/{id}:
    delete:
      description: Delete a gallery and all its photos (admin only)
      parameters:
      - description: Gallery ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Delete a gallery
      tags:
      - galleries
    get:
      description: Get a single gallery with all its photos
      parameters:
      - description: Gallery ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/utils.APIResponse'
      summary: Get gallery by ID
      tags:
      - galleries
    put:
      consumes:
      - application/json
      description: Update gallery details (admin only)
      parameters:
      - description: Gallery ID
        in: path
        name: id
        required: true
        type: integer
      - description: Updated gallery data
        in: body
        name: gallery
        required: true
        schema:
          $ref: '#/definitions/dto.UpdateGalleryRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Update a gallery
      tags:
      - galleries
  /galleries/{id}/photos:
    post:
      consumes:
      - multipart/form-data
      description: Upload multiple photos to a gallery (admin only)
      parameters:
      - description: Gallery ID
        in: path
        name: id
        required: true
        type: integer
      - description: Photos to upload
        in: formData
        name: photos
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Upload photos to gallery
      tags:
      - galleries
  /galleries/photos/{photo_id}:
    delete:
      description: Delete a single photo from a gallery (admin only)
      parameters:
      - description: Photo ID
        in: path
        name: photo_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Delete a photo
      tags:
      - galleries
  /health:
    get:
      description: Check the health status of the API and its dependencies
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handlers.HealthResponse'
        "503":
          description: Service Unavailable
          schema:
            $ref: '#/definitions/handlers.HealthResponse'
      summary: Health Check
      tags:
      - health
  /login:
    post:
      consumes:
      - application/json
      description: Login with username and password to get JWT tokens
      parameters:
      - description: Login Credentials
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/dto.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/dto.TokenPair'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
      summary: Login admin
      tags:
      - auth
  /logout:
    post:
      description: Clear authentication cookies
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
      summary: Logout admin
      tags:
      - auth
  /ready:
    get:
      description: Check if the service is ready to accept traffic
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Readiness Check
      tags:
      - health
  /refresh:
    post:
      consumes:
      - application/json
      description: Use refresh token to get new access token
      parameters:
      - description: Refresh Token
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/dto.RefreshTokenRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/dto.TokenPair'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
      summary: Refresh access token
      tags:
      - auth
  /upload:
    post:
      consumes:
      - multipart/form-data
      description: Upload an image file to Cloudinary (max 5MB, JPEG/PNG/WebP/GIF
        only)
      parameters:
      - description: Image file to upload
        in: formData
        name: file
        required: true
        type: file
      - description: 'Folder name (default: general)'
        in: formData
        name: folder
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/utils.APIResponse'
            - properties:
                data:
                  properties:
                    url:
                      type: string
                  type: object
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Upload image
      tags:
      - media
  /videos:
    get:
      description: Get all videos
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/utils.APIResponse'
      summary: Get all videos
      tags:
      - videos
    post:
      consumes:
      - application/json
      description: Create a new video entry (admin only)
      parameters:
      - description: Video data
        in: body
        name: video
        required: true
        schema:
          $ref: '#/definitions/dto.CreateVideoRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Create a new video
      tags:
      - videos
  /videos/{id}:
    delete:
      description: Delete a video (admin only)
      parameters:
      - description: Video ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Delete a video
      tags:
      - videos
    get:
      description: Get a single video by its ID (admin only)
      parameters:
      - description: Video ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Get video by ID
      tags:
      - videos
    put:
      consumes:
      - application/json
      description: Update an existing video (admin only)
      parameters:
      - description: Video ID
        in: path
        name: id
        required: true
        type: integer
      - description: Updated video data
        in: body
        name: video
        required: true
        schema:
          $ref: '#/definitions/dto.UpdateVideoRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/utils.APIResponse'
      security:
      - BearerAuth: []
      summary: Update a video
      tags:
      - videos
securityDefinitions:
  BearerAuth:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
